{% extends "layout.html" %}
{% block head %}
  <script>
    $(document).ready(function($) {
      // adjust the height of our directory listing so everything lines up nice
      var boxes = $('.provider-entry-inner');
      var maxHeight = Math.max.apply(
        Math, boxes.map(function() {
          return $(this).height();
        }).get());
      boxes.height(maxHeight);
    });
  </script>
{% endblock %}
{% block content %}
  <div id="carousel-promotions" class="carousel">
    <div class="carousel-wrapper">
    <div id="carousel-promo" class="cycle-slideshow carousel-inner"
      data-cycle-pager=".cycle-pager"
      data-cycle-fx="carousel"
      data-cycle-timeout="5000"
      data-cycle-slides="&gt; div">
      <span class="cycle-prev">&lsaquo;</span>
      <span class="cycle-next">&rsaquo;</span>
      {% for p in slider %}
      <div class="item">
        <div class="item-inner">
          <div>
          {% if p['viewData']['images']['fulllogo'] %}
          <h2><img src="{{createDataURL(p['viewData']['images']['fulllogo'])}}"></img></h2>
          {% else %}
          <h2><img src="{{createDataURL(p['viewData']['images']['logo'])}}"></img> {{p['viewData']['name']}}</h2>
          {% endif %}
          <p class="description">{{p['viewData']['shortDescription']}}</p>
          </div>
          <div class="activation">
          <a class="button gutter-bottom-24" onclick="activateProvider(this, '{{p['key']}}')" data-service="{{p['manifestData']}}">{{ _('Activate Now') }} <span>&raquo;</span></a>
          <br/><a href="{{p['key']}}.html" class="moreinfo">{{ _('Learn More&hellip;') }}</a>
          </div>
          <div class="carousel-image">
          <img src="{{p['viewData']['images']['carousel']}}" style="float:right;"></img>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
    </div>
  </div>

  <div id="wrapper" class="content">
    <div id="directory">
      <div class="directory-header">
      <h3>{{ _('Enhance your Firefox experience, get more out of the Web') }}</h3>
      <p class="lead">{% trans %}Easy to use, no software or Add-ons to download and install, just click Activate and new functionality is delivered to you from the Web.  Anything from social media services, to cloud bookmarking, music and personalized news, adding these services to Firefox lets you get more out of the web.{% endtrans %}
      </p>
{% if not production %}
      <p class="lead"><b>You are on a test version of this website.</b> Some
      entries on this site are mockups and do not work as expected. If you did
      not intend to use the test site go to the <a
      href="https://activations.mozilla.org"><b>production site</b></a>. otherwise,
      please <a href="#" data-featherlight="#aboutModel"><b>read the
      instructions</b></a> so it will work correctly for you.</p>
{% endif %}
      </div>
      <div id="directory-grid" class="row">
      {% for p in source %}
      {% if not production or p['status'] == 'release' %}
        {% include 'index_entry2.html' %}
      {% endif %}
      {% endfor %}
      </div>
    </div>
  </div>
{% if not production %}
  <script>
    $("#directory-domain").text(location.origin);
    $.featherlight("#aboutModel");
  </script>
{% endif %}

{% endblock %}
